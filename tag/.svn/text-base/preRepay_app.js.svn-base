riot.tag2("app",'<item class="{disabled: (loanStatus==⁗0⁗)}" each="{items}"> <key-item> <checkbox onclick="{parent.toggle}"> <input type="checkbox" checked="{done}"> <i class="icon icon-form-checkbox"></i> </checkbox> <div class="box-lend-body"> <div class="box-lend-num">借款&nbsp;&yen;&nbsp;{loanAmt}</div> <div class="box-lend-time">{formatDate(loanDate)}</div> </div> </key-item> <div class="box-forward-repay"> 应还 <span class="box-repay-list">&nbsp;&yen;&nbsp;{needpayAmt}</span> </div> </item> <div class="box-forward-all"> <key-item> <checkbox onclick="{toggleAll}"> <input type="checkbox" checked="{selectAll}"> <i class="icon icon-form-checkbox"></i> </checkbox> <div class="box-lend-body"> <div class="box-lend-num">全选</div> </div> </key-item> <div class="box-forward-repay"> 总计 <span class="box-repay-amount"><i>&nbsp;&yen;&nbsp;</i>{count}</span> </div> </div> <div class="hint-area" if="{hasNouse}"> <h4>提示：</h4> <p>①&nbsp;银行正在自动扣款，或者正在处理还款时，暂时无法选中借款进行提前还款。</p> <p>②&nbsp;当日借款需次日才可还款。</p> </div>','app checkbox input[type="checkbox"],[data-is="app"] checkbox input[type="checkbox"]{ display: none; } app .icon.icon-form-checkbox,[data-is="app"] .icon.icon-form-checkbox{ position: relative; border-radius: 22px; border: 1px solid #c7c7cc; width: 22px; height: 22px; } app input[type="checkbox"]:checked+.icon.icon-form-checkbox,[data-is="app"] input[type="checkbox"]:checked+.icon.icon-form-checkbox{ background-image: url("assets/images/float@2x.png"); background-size: cover; background-position: center center; background-repeat: no-repeat; border: 0; }',"",function(e){var t=this;this.items,this.selectAll=!1,this.count=0,this.hasNouse=!1,this.toggle=function(e){var t=e.item;if("0"==t.loanStatus)return!1;var i=!t.done;return t.done=i,this.getTotal(),i||this.update({selectAll:!1}),!0}.bind(this),this.toggleAll=function(e){var t=!this.selectAll;this.update({selectAll:t}),$(this.items).each(function(e,i){if("0"==i.loanStatus)return!1;i.done=t}),this.getTotal()}.bind(this),this.formatDate=function(e){return e.replace(/\//g,".")}.bind(this),this.getTotal=function(){var e=0;$(this.items).each(function(t,i){i.done&&(e+=parseFloat(i.needpayAmt))}),e?$(".submit-btn").removeClass("disabled"):$(".submit-btn").addClass("disabled"),e=e.toFixed(2),this.update({count:e})}.bind(this),window.receiptList=function(e){var i=JSON.parse(e),o=i.loanList;$(o).forEach(function(e){if("0"==e.loanStatus)return t.update({hasNouse:!0}),!1}),t.update({items:o})},$("#handlepreRepayCommit").tap(function(){if($("#handlepreRepayCommit").hasClass("disabled"))return!1;var e=t.items.filter(function(e){return e.done}),i=parseFloat(t.count).toFixed(2),o=String(i),n={loanIdList:e,totalNeedpayAmt:o};n=JSON.stringify(n),nativeJS.preRepayCommit(n)}),this.on("mount",function(){nativeJS.onPageFinish()})});