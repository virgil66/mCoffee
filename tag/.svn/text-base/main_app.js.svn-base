riot.tag2("app",'<div class="board" if="{creditFlag}"> <div class="show-card"> <div> <div class="summary">正式可借额度</div> <div class="title"><span class="mark">&yen;</span>{getBoard(\'availableLimit\')}</div> </div> </div> <div class="hint-bar columns"> <div class="column"> <span class="small-dot dot-blue"></span>总额度:&nbsp;&nbsp;&yen;{getBoard(\'creditLimit\')} </div> <div class="line"></div> <div class="column"> <span class="small-dot dot-green"></span>日利率:&nbsp;&nbsp;{getBoard(\'rate\')}% </div> </div> <div class="submit-btn" onclick="{handleDebit}" if="{!isLoader}">借钱</div> <div class="loader-area"> <div class="audit-audit-body" if="{isLoader}"> <img src="assets/images/audit_icon.png" alt="审核中" class="audit-audit-bg"> <span class="audit-audit-state">审核中...</span> </div> <div class="border-tp-line" if="{message}"> <list class="margin-lt-0"> <div class="columns"> <span class="waring-icon ui-gray" id="show-card-icon"></span> <div class="item-title column"> {message} </div> </div> </list> </div> </div> </div> <div class="board" if="{isPreCredit()}"> <div class="show-card"> <div> <div class="summary">可借额度</div> <div class="title"><span class="mark">&yen;</span><i class="unknown-account"></i></div> </div> </div> <div class="hint-bar columns"> <div class="column"> <span class="small-dot dot-green"></span>按日计息,日利率低至&nbsp;{getBoard(\'preRate\')|| \'n\'}% </div> </div> <div class="submit-btn disabled" onclick="{handleProCredit}">申请</div> <div if="{message}" class="border-tp-line"> <list> <div class="columns"> <span class="waring-icon" id="txtIcon"></span> <div class="item-title column"> {message} </div> </div> </list> </div> </div> <div class="board" if="{isApply()}"> <div class="show-card"> <div> <div class="summary">可借额度</div> <div class="title"><span class="mark">&yen;</span><i class="unknown-account"></i></div> </div> </div> <div class="hint-bar columns"> <div class="column"> <span class="small-dot dot-green"></span>按日计息,日利率低至&nbsp;{getBoard(\'preRate\')|| \'n\'}% </div> </div> <div class="submit-btn" onclick="{handleApply}" if="{!isLoader}">申请</div> <div class="loader-area"> <div class="audit-audit-body" if="{isLoader}"> <img src="assets/images/audit_icon.png" alt="审核中" class="audit-audit-bg"> <span class="audit-audit-state">审核中...</span> </div> <div if="{message}" class="border-tp-line"> <list> <div class="columns"> <span class="waring-icon" id="txtIcon"></span> <div class="item-title column"> {message} </div> </div> </list> </div> </div> </div> <div class="warning-info"> <list onclick="{handlePayFail}" if="{repayFailReason}"> <div class="columns"> <span class="waring-icon"></span> <div class="item-title column"> 还款失败:{repayFailReason} </div> <div class="item-after"> </div> </div> </list> </div> <div class="wingBlank"></div> <div class="warning-info warning-info-blue"> <list if="{hint}"> <div class="columns"> <span class="waring-icon ui-blue" id="hintIcon"></span> <div class="item-title column"> {hint} </div> </div> </list> <list onclick="{handleOverDue}" if="{overDays}" class="over-day-red"> <div class="columns"> <span class="waring-icon ui-red"></span> <div class="item-title column"> 逾期{overDays}天，请立即还款 </div> <div class="item-after"> </div> </div> </list> <list if="{debitFail}" class="over-day-red"> <div class="columns"> <span class="waring-icon ui-red"></span> <div class="item-title column"> {debitFail} </div> </div> </list> </div> <div class="wingBlank"></div> <div if="{(creditFlag && hasloanInfo)}" class="main-columns-border"> <list onclick="{handleMyDebt}"> <div class="columns"> <div class="item-title column">我的借贷</div> <div class="item-after"> 共{loanInfo.count}笔 </div> </div> </list> <list onclick="{handleNowShouldPay}"> <div class="columns"> <div class="item-title column"> <div class="refund"> <h6 class="level-6">本期应还</h6> <div class="refund-number">&yen;<span class="refund-number-details">{loanInfo.repayTotalAmt}</span></div> <p class="refund-tips">{loanInfo.repayDate}从{loanInfo.account}自动扣款</p> </div> </div> <div class="item-after"> </div> </div> </list> <div class="btn-default" id="prepayment" onclick="{handleprePay}"> <span class="prepayment">提前还清</span> </div> </div>',"","",function(i){var a=this;this.creditFlag=!1,this.applyType="00",this.applyState,this.board,this.hasloanInfo=!1,this.loanInfo,this.debitFail,this.overDays,this.isPreCredit=function(){return!this.creditFlag&&"00"===this.applyType}.bind(this),this.isApply=function(){return!this.creditFlag&&"00"!==this.applyType}.bind(this),this.getBoard=function(i){var a=this.board||{};return a.hasOwnProperty(i)?a[i]:""}.bind(this),this.message,this.hint,this.isLoader=!1,this.loaderStep,window.creditStatus=function(i){function s(){var i=["0001","0002","0003","0004","0005","0104"];return!($.inArray(n,i)>-1)||($(".submit-btn").addClass("disabled"),a.update({isLoader:!1}),a.update({message:r}),$("#txtIcon").addClass("ui-blue"),!1)}var t=JSON.parse(i),d=1==t.creditFlag;a.update({creditFlag:d});var e=t.applyType;a.update({applyType:e});var n=t.applySts,l=t.businessMesg,r=t.stsMesg,c=t.overDays;if(a.update({overDays:c}),d){var o=!1,v=!1,u={creditLimit:t.creditLimit,availableLimit:t.availableLimit,rate:t.rate};if(a.update({board:u}),t.hasOwnProperty("loanInfos")){var p=t.loanInfos;if(p){var m=p.loanList.length>0;p.count=p.loanList.length;var h=!1;a.update({hasloanInfo:m}),m&&a.update({loanInfo:p}),$.each(p.loanList,function(i,a){if("1"==a.repayStatus)return h=!0,!1}),h||(v=!0)}}else a.update({hasloanInfo:!1});var b=t.debitFail;"0402"==n?(a.update({isLoader:!0}),a.update({message:r}),$("#show-card-icon").addClass("ui-gray")):"0403"==n?(a.update({isLoader:!0}),a.update({message:r}),a.update({hint:l})):"0404"==n&&(o=!0,a.update({message:r}),$("#show-card-icon").addClass("ui-blue")),b&&a.update({debitFail:b}),c&&c>"0"?(a.update({isLoader:!1}),o=!0,v=!0):"0"==c&&a.update({overDays:""});return s()||(o=!0),o?$(".submit-btn").addClass("disabled"):$(".submit-btn").removeClass("disabled"),v?$("#prepayment").addClass("disabled"):$("#prepayment").removeClass("disabled"),!1}if(!d&&"00"!==e){var u={creditLimit:t.creditLimit,preRate:t.preRate};return a.update({board:u}),"0101"==n?(a.update({isLoader:!0}),a.update({message:r})):"0102"==n?(a.update({isLoader:!0}),a.update({message:r}),a.update({hint:l})):"0103"==n&&a.update({isLoader:!0,message:r,hint:l}),s(),!1}if(!d){$(".submit-btn").removeClass("disabled");var u={preCreditLimit:t.preCreditLimit,preRate:t.preRate};return a.update({board:u}),s(),!1}},this.handleProCredit=function(i){if($(i.currentTarget).hasClass("disabled"))return!1;nativeJS.proCredit()}.bind(this),this.handleApply=function(i){if($(i.currentTarget).hasClass("disabled"))return!1;nativeJS.apply()}.bind(this),this.handleDebit=function(i){if($(i.currentTarget).hasClass("disabled"))return!1;nativeJS.debit()}.bind(this),this.handlePayFail=function(){nativeJS.payFail()}.bind(this),this.handleMyDebt=function(){nativeJS.myDebt()}.bind(this),this.handleNowShouldPay=function(){nativeJS.nowShouldPay()}.bind(this),this.handleOverDue=function(){nativeJS.overDue()}.bind(this),this.handleprePay=function(i){if($(i.currentTarget).hasClass("disabled"))return!1;nativeJS.prePay()}.bind(this),this.on("mount",function(){nativeJS.onPageFinish()})});